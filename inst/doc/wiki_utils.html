<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Angel Zazo, Department of Computer Science and Automatics, University of Salamanca" />

<meta name="date" content="2025-07-11" />

<title>Examples with wiki_utils</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Examples with wiki_utils</h1>
<h4 class="author">Angel Zazo, Department of Computer Science and
Automatics, University of Salamanca</h4>
<h4 class="date">2025-07-11</h4>



<div id="functions" class="section level2">
<h2>Functions</h2>
<div id="functions-to-obtain-a-list-of-wikidata-entities" class="section level3">
<h3>Functions to obtain a list of Wikidata entities</h3>
<p>w_SearchByLabel(string, mode=‘inlabel’, langs=““, langsorder=’’,
instanceof=”“, Pproperty=”“, debug=FALSE)</p>
<p>w_SearchByOccupation(Qoc, mode=c(‘default’,‘count’,‘wikipedias’),
langsorder=’‘, wikilangs=’’, nlimit=10000, debug=FALSE)</p>
</div>
<div id="function-to-obtain-information-from-a-list-of-wikidata-entities-or-a-single-one." class="section level3">
<h3>Function to obtain information from a list of Wikidata entities or a
single one.</h3>
<p>w_isInstanceOf(entity_list, instanceof=’’, nlimit=50000,
debug=FALSE)</p>
<p>w_Wikipedias(entity_list, wikilangs=““, instanceof=’’, nlimit=1500,
debug=FALSE)</p>
<p>w_isValid(entity_list, nlimit=50000, debug=FALSE)</p>
<p>w_Property(entity_list, Pproperty, includeQ=FALSE, langsorder=‘en’,
nlimit=10000, debug=FALSE)</p>
<p>w_SearchByAuthority(Pauthority, langsorder=’‘, instanceof=’’,
nlimit=10000, debug=FALSE)</p>
<p>Pauthority = Authority Database Property in Wikidata</p>
<p>w_EntityInfo(entity_list, mode=‘default’, langsorder=’’,
wikilangs=““, nlimit=MW_LIMIT, debug=FALSE)</p>
</div>
<div id="functions-to-obtain-information-using-the-wikimedia-apis" class="section level3">
<h3>Functions to obtain information using the WikiMedia API’s</h3>
<p>m_Opensearch(string, project=‘en.wikipedia.org’,
profile=“engine_autoselect”, redirects=“resolve”)</p>
<p>m_reqMediaWiki(titles,
mode=c(‘wikidataEntity’,‘redirects’,‘pagePrimaryImage’,‘pageFiles’),
project=‘en.wikipedia.org’, redirects=TRUE,
exclude_ext=‘svg|webp|xcf’)</p>
<p>m_Pageviews(article, start, end, project=“en.wikipedia.org”,
access=“all-access”, agent=“user”, granularity=“monthly”,
redirects=FALSE)</p>
<p>m_XtoolsInfo(article, infotype=c(“articleinfo”, “prose”, “links”),
project=“en.wikipedia.org”, redirects=FALSE)</p>
</div>
<div id="functions-to-obtain-information-viafid-or-cluster-records-using-the-viaf-api" class="section level3">
<h3>Functions to obtain information (viafID or cluster records) using
the VIAF API</h3>
<p>v_AutoSuggest(author) : obtains viafID</p>
<p>v_Search(CQL_Query, mode=c(‘default’, ‘anyField’, ‘allmainHeadingEl’,
‘allNames’, ‘allPersonalNames’, ‘allTitle’), schema=c(‘brief’, ‘JSON’))
: obtains clusters records</p>
</div>
<div id="function-to-retrieve-a-cluster-record-using-the-viafid." class="section level3">
<h3>Function to retrieve a cluster record using the viafID.</h3>
<p>v_GetRecord(viafid, record_format=‘viaf.json’): retrieve a cluster
record</p>
</div>
<div id="function-to-extract-information-from-a-viaf-cluster-record" class="section level3">
<h3>Function to extract information from a VIAF cluster record</h3>
<p>v_Extract(viaf, info, source=NULL)</p>
</div>
</div>
<div id="package-installation-and-loading" class="section level2">
<h2>Package installation and loading</h2>
<p>To install and load the updated version of the wikiTools package
simply run the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;wikiTools&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(wikiTools)</span></code></pre></div>
</div>
<div id="examples-of-wikidata-functions-using-wdqs" class="section level2">
<h2>Examples of Wikidata functions using WDQS</h2>
<div id="search-string-iranzo-in-different-positions" class="section level4">
<h4>Search string “Iranzo” in different positions</h4>
<p>Exact search in Label or exact search in AltLabel (case sensitive and
diacritics)</p>
<p>Optional: limit by instanceof Wikidata class (Qxx).</p>
<p>Optional: return information of some properties (Pproperties,
Pxxx).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5|Q101352&#39;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>                      <span class="at">Pproperty =</span> <span class="st">&#39;P21|P569|P570&#39;</span>)</span></code></pre></div>
</div>
<div id="search-at-the-beginning-in-label-or-altlabel-diacritics-and-case-are-ignored" class="section level4">
<h4>Search at the beginning in Label or AltLabel (diacritics and case
are ignored)</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">lang=</span><span class="st">&#39;en&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">mode=</span><span class="st">&#39;startswith&#39;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">lang=</span><span class="st">&#39;en&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>                      <span class="at">mode=</span><span class="st">&#39;startswith&#39;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">lang=</span><span class="st">&#39;en&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>                      <span class="at">instanceof =</span> <span class="st">&#39;Q5|Q101352&#39;</span>, <span class="at">mode=</span><span class="st">&#39;startswith&#39;</span>)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">lang=</span><span class="st">&#39;en&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>                      <span class="at">Pproperty =</span> <span class="st">&#39;P21|P569|P570&#39;</span>, <span class="at">mode=</span><span class="st">&#39;startswith&#39;</span>)</span></code></pre></div>
</div>
<div id="search-in-any-position-in-label-or-altlabel-diacritics-and-case-are-ignored" class="section level4">
<h4>Search in any position in Label or AltLabel (diacritics and case are
ignored)</h4>
<p>If lang==’’ search in any language, else the search is performed only
in the language indicated.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">mode=</span><span class="st">&#39;inlabel&#39;</span>)</span></code></pre></div>
<p>Search only in Chinese (Simplified) (language code: zh):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;zh|es&#39;</span>, <span class="at">lang=</span><span class="st">&#39;zh&#39;</span>, <span class="at">mode=</span><span class="st">&#39;inlabel&#39;</span>)</span></code></pre></div>
<p>Optional instanceof and Property</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>,</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>                      <span class="at">mode=</span><span class="st">&#39;inlabel&#39;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5|Q101352&#39;</span>,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                      <span class="at">mode=</span><span class="st">&#39;inlabel&#39;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>                      <span class="at">Pproperty =</span> <span class="st">&#39;P21|P569|P570&#39;</span>, <span class="at">mode=</span><span class="st">&#39;inlabel&#39;</span>)</span></code></pre></div>
</div>
<div id="aux-getting-a-vector-of-entities-l-to-use-later." class="section level4">
<h4>aux: getting a vector of entities (<code>l</code>) to use
later.</h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="at">string=</span><span class="st">&#39;Iranzo&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">mode=</span><span class="st">&#39;inlabel&#39;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>l <span class="ot">&lt;-</span> df<span class="sc">$</span>entity</span></code></pre></div>
</div>
<div id="w_isinstanceof" class="section level4">
<h4>w_isInstanceOf</h4>
<p>Check if elements in entity_list are instance of a Wikimedia
class</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_isInstanceOf</span>(<span class="at">entity_list=</span>l, <span class="at">instanceof=</span><span class="st">&#39;Q5&#39;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># Not TRUE</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>df[<span class="sc">!</span>df<span class="sc">$</span>instanceof_Q5,]</span></code></pre></div>
<pre><code>##                entity       instanceof instanceof_Q5
## Q6058550     Q6058550   Q16560|Q133215         FALSE
## Q11912738   Q11912738            Q3947         FALSE
## Q31835108   Q31835108        Q24529780         FALSE
## Q45976259   Q45976259          Q101352         FALSE
## Q45987474   Q45987474         Q4167410         FALSE
## Q47034606   Q47034606         Q1642895         FALSE
## Q67289998   Q67289998           Q38720         FALSE
## Q83296470   Q83296470                          FALSE
## Q85684513   Q85684513 Q28564|Q12317349         FALSE
## Q97101007   Q97101007          Q245117         FALSE
## Q97101009   Q97101009          Q245117         FALSE
## Q111015546 Q111015546             Q571         FALSE
## Q117783790 Q117783790          Q811430         FALSE
## Q125544306 Q125544306        Q47461344         FALSE
## Q125544313 Q125544313         Q3331189         FALSE
## Q131370779 Q131370779           Q79007         FALSE</code></pre>
</div>
<div id="w_wikipedias" class="section level4">
<h4>w_Wikipedias</h4>
<p>Search for Wikipedia pages in all/some languages</p>
<p>Optional: instanceOF (limit to entities which are instance of a
Wikidata class)</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_Wikipedias</span>(<span class="at">entity_list=</span>l)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_Wikipedias</span>(<span class="at">entity_list=</span>l, <span class="at">wikilangs=</span><span class="st">&#39;es|en|fr&#39;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_Wikipedias</span>(<span class="at">entity_list=</span>l, <span class="at">wikilangs=</span><span class="st">&#39;es|en|fr&#39;</span>, <span class="at">instanceof=</span><span class="st">&quot;Q5&quot;</span>)</span></code></pre></div>
</div>
<div id="w_searchbyoccupation" class="section level4">
<h4>w_SearchByOccupation</h4>
<p>Count entities, or get the entities with that occupation, also get
Wikipedia pages</p>
<p>Note: depending on connection speed, nlimit parameter musts be
adjusted</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">w_SearchByOccupation</span>(<span class="at">Qoc=</span><span class="st">&quot;Q2306091&quot;</span>, <span class="at">mode=</span><span class="st">&#39;count&#39;</span>) <span class="co"># &quot;Q2306091&quot; Qoc for Sociologist</span></span></code></pre></div>
<pre><code>## [1] 21190</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">w_SearchByOccupation</span>(<span class="at">Qoc=</span><span class="st">&quot;Q2306091&quot;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>l <span class="ot">&lt;-</span> q<span class="sc">$</span>entity</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>lw <span class="ot">&lt;-</span> <span class="fu">w_SearchByOccupation</span>(<span class="at">Qoc=</span><span class="st">&#39;Q2306091&#39;</span>, <span class="at">mode=</span><span class="st">&#39;wikipedias&#39;</span>) <span class="co"># lw=dataframe</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co"># We can obtain the same information using previous function w_Wikipedias:</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>lw2 <span class="ot">&lt;-</span> <span class="fu">w_Wikipedias</span>(<span class="at">entity_list=</span>l)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># Verifying:</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="fu">all</span>(lw[<span class="st">&#39;Q10320558&#39;</span>,<span class="st">&#39;pages&#39;</span>] <span class="sc">==</span> lw2[<span class="st">&#39;Q10320558&#39;</span>,<span class="st">&#39;pages&#39;</span>])</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co"># Verifying:</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">sort</span>(<span class="fu">strsplit</span>(lw[<span class="st">&#39;Q9061&#39;</span>, <span class="st">&#39;pages&#39;</span>], <span class="st">&#39;|&#39;</span>, <span class="at">fixed =</span> T)[[<span class="dv">1</span>]]) <span class="sc">==</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>    <span class="fu">sort</span>(<span class="fu">strsplit</span>(lw2[<span class="st">&#39;Q9061&#39;</span>, <span class="st">&#39;pages&#39;</span>], <span class="st">&#39;|&#39;</span>, <span class="at">fixed =</span> T)[[<span class="dv">1</span>]]))</span></code></pre></div>
</div>
<div id="w_isvalid." class="section level4">
<h4>w_isValid.</h4>
<p>Check if the Wikidata entities are valid. A entity is valid if it has
a label or has a description. If one entity exists but is not valid, is
possible that it has a redirection to other entity, in that case, the
redirection is obtained. Other entities may have existed in the past,
but they are currently deleted.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> <span class="fu">append</span>(l, <span class="fu">c</span>(<span class="st">&quot;Q115637688&quot;</span>, <span class="st">&quot;Q105660123&quot;</span>))  <span class="co"># Note: adding two new entities</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">w_isValid</span>(l2)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co"># Not valid</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>v[<span class="sc">!</span>v<span class="sc">$</span>valid,]</span></code></pre></div>
<pre><code>##                entity valid instanceof redirection
## Q115637688 Q115637688 FALSE                       
## Q105660123 Q105660123 FALSE              Q97352588</code></pre>
</div>
<div id="w_property" class="section level4">
<h4>w_Property</h4>
<p>Obtain properties of entity_list.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">w_Property</span>(l, <span class="at">Pproperty =</span> <span class="st">&#39;P21|P569|P214&#39;</span>, <span class="at">langsorder =</span> <span class="st">&#39;es|en&#39;</span>)</span></code></pre></div>
</div>
<div id="w_searchbyauthority" class="section level4">
<h4>w_SearchByAuthority</h4>
<p>Search for Wikidata entities that have an identifier in the Wikidata
authority property “Pauthority”.</p>
<p>Optional: instanceOf</p>
<p>Example: Pauthority=P4439 (has identifier in the Museo Nacional
Centro de Arte Reina Sofía)</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>mncars   <span class="ot">&lt;-</span> <span class="fu">w_SearchByAuthority</span>(<span class="at">Pauthority=</span><span class="st">&quot;P4439&quot;</span>, <span class="at">langsorder =</span> <span class="st">&#39;es|en&#39;</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co"># 1286  [human, groups, etc.]</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>mncarsQ5 <span class="ot">&lt;-</span> <span class="fu">w_SearchByAuthority</span>(<span class="at">Pauthority=</span><span class="st">&quot;P4439&quot;</span>, <span class="at">langsorder =</span> <span class="st">&#39;es|en&#39;</span>,</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>                                     <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>)  <span class="co"># 1280</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co"># Entities are not &#39;human&#39; (Q5) [see entityDescription column):</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>mncars[<span class="sc">!</span>(mncars<span class="sc">$</span>entity <span class="sc">%in%</span> mncarsQ5<span class="sc">$</span>entity),]  <span class="co"># not instance of Q5.</span></span></code></pre></div>
<pre><code>##                entity                                  entityLabel
## Q27657364   Q27657364 Midnight Gardening (Jardinería a medianoche)
## Q5849776     Q5849776                                 Estrujenbank
## Q317874       Q317874                                     Ant Farm
## Q4517304     Q4517304                                  Chto Delat?
## Q105687869 Q105687869            João Maria Gusmão and Pedro Paiva
## Q20102460   Q20102460                        Agustín Parejo School
##                                   entityDescription        instanceof
## Q27657364                 cuadro de Jerónimo Elespe          Q3305213
## Q5849776                        colectivo artístico          Q1400264
## Q317874    American art and architecture collective Q1400264|Q4387609
## Q4517304                     Russian art collective          Q1400264
## Q105687869                  Portuguese artistic duo         Q85942930
## Q20102460                                                    Q1400264
##                                          instanceofLabel                 P4439
## Q27657364                                        pintura       elespe-jeronimo
## Q5849776                           colectivo de artistas          estrujenbank
## Q317874    colectivo de artistas|estudio de arquitectura              ant-farm
## Q4517304                           colectivo de artistas            chto-delat
## Q105687869                                 duo artístico     gusmao-joao-maria
## Q20102460                          colectivo de artistas agustin-parejo-school</code></pre>
</div>
<div id="w_entityinfo" class="section level4">
<h4>w_EntityInfo</h4>
<p>Get some properties of a Wikidata entity.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_EntityInfo</span>(<span class="at">entity_list=</span><span class="st">&#39;Q134644&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_EntityInfo</span>(<span class="at">entity_list=</span><span class="st">&#39;Q134644&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">wikilangs=</span><span class="st">&#39;es|en|fr&#39;</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_EntityInfo</span>(<span class="fu">c</span>(<span class="st">&#39;Q270510&#39;</span>, <span class="st">&#39;Q1675466&#39;</span>, <span class="st">&#39;Q24871&#39;</span>), <span class="at">mode=</span><span class="st">&#39;film&#39;</span>, <span class="at">langsorder=</span><span class="st">&#39;es|en&#39;</span>, <span class="at">wikilangs=</span><span class="st">&#39;es|en|fr&#39;</span>)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="co"># Search string &#39;abba&#39; inlabel</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">w_SearchByLabel</span>(<span class="st">&#39;abba&#39;</span>, <span class="at">mode=</span><span class="st">&#39;inlabel&#39;</span>, <span class="at">langsorder =</span> <span class="st">&#39;&#39;</span>, <span class="at">instanceof =</span> <span class="st">&#39;Q5&#39;</span>)</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_EntityInfo</span>(w<span class="sc">$</span>entity, <span class="at">langsorder=</span><span class="st">&#39;en&#39;</span>, <span class="at">wikilangs=</span><span class="st">&#39;en|es|fr&#39;</span>, <span class="at">debug=</span><span class="st">&#39;info&#39;</span>)</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co"># Search 3D films</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">w_SearchByInstanceof</span>(<span class="at">instanceof=</span><span class="st">&#39;Q229390&#39;</span>, <span class="at">langsorder =</span> <span class="st">&#39;en|es&#39;</span>, <span class="at">debug =</span> <span class="st">&#39;info&#39;</span>)</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">w_EntityInfo</span>(w<span class="sc">$</span>entity, <span class="at">mode=</span><span class="st">&quot;film&quot;</span>, <span class="at">langsorder=</span><span class="st">&#39;en&#39;</span>, <span class="at">wikilangs=</span><span class="st">&#39;en&#39;</span>, <span class="at">debug=</span><span class="st">&#39;info&#39;</span>)</span></code></pre></div>
</div>
</div>
<div id="examples-of-wikimedia-functions" class="section level2">
<h2>Examples of WikiMedia functions</h2>
<div id="m_opensearch" class="section level4">
<h4>m_Opensearch</h4>
<p>Search articles that contains any words (note: it is better to use a
large string)</p>
<p>Some search profiles:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">m_Opensearch</span>(<span class="at">string=</span><span class="st">&#39;Duque de Alba&#39;</span>, <span class="at">project=</span><span class="st">&#39;es.wikipedia.org&#39;</span>,</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>                   <span class="at">profile=</span><span class="st">&quot;engine_autoselect&quot;</span>, <span class="at">redirects=</span><span class="st">&quot;resolve&quot;</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">m_Opensearch</span>(<span class="at">string=</span><span class="st">&#39;Duque de Alba&#39;</span>, <span class="at">project=</span><span class="st">&#39;es.wikipedia.org&#39;</span>, <span class="at">profile=</span><span class="st">&quot;strict&quot;</span>)</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">m_Opensearch</span>(<span class="at">string=</span><span class="st">&#39;Duque de Alba&#39;</span>, <span class="at">project=</span><span class="st">&#39;es.wikipedia.org&#39;</span>, <span class="at">profile=</span><span class="st">&quot;fuzzy&quot;</span>)</span></code></pre></div>
</div>
<div id="m_reqmediawiki" class="section level4">
<h4>m_reqMediaWiki</h4>
<p>Checks if titles are in a Wikimedia project and returns the Wikidata
entity for them, if they have one.</p>
<p>Note that URLdecode(“a%CC%8C”) is the letter “a” with the combining
caron (ǎ)</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">m_reqMediaWiki</span>(<span class="fu">c</span>(<span class="st">&#39;Max Planck&#39;</span>, <span class="fu">URLdecode</span>(<span class="st">&quot;a%CC%8C&quot;</span>), <span class="st">&#39;Max&#39;</span>, <span class="st">&#39;Cervante&#39;</span>, <span class="st">&#39;humanist&#39;</span>),</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>                        <span class="at">mode=</span><span class="st">&#39;wikidataEntity&#39;</span>, <span class="at">project=</span><span class="st">&#39;en.wikipedia.org&#39;</span>)</span></code></pre></div>
<p>Obtains the redirections of a page (the page itself can be a redirect
to other page).</p>
<p>Returns a vector for each title, in each vector the first element is
the destiny, rest are all pages that redirect to it.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">m_reqMediaWiki</span>(<span class="fu">c</span>(<span class="st">&#39;Cervantes&#39;</span>, <span class="st">&#39;Planck&#39;</span>, <span class="st">&#39;Noexiste&#39;</span>), <span class="at">mode=</span><span class="st">&#39;redirects&#39;</span>,</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>                    <span class="at">project=</span><span class="st">&#39;es.wikipedia.org&#39;</span>)</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## $Cervantes
##  [1] &quot;Miguel de Cervantes&quot;            &quot;Miguel de Cerbantes&quot;           
##  [3] &quot;Miguel de Cervantes y Saavedra&quot; &quot;Miguel De Cervantes y Saavedra&quot;
##  [5] &quot;El manco de Lepanto&quot;            &quot;Miguel de cervantes&quot;           
##  [7] &quot;Manco de Lepanto&quot;               &quot;Don Miguel de Cervantes&quot;       
##  [9] &quot;Cervantino&quot;                     &quot;Cervantina&quot;                    
## [11] &quot;Miguel de Cervantes Saavedra&quot;   &quot;Cervantes Saavedra, Miguel de&quot; 
## [13] &quot;Miguel de Cervantes y Cortinas&quot; &quot;Cervantesco&quot;                   
## [15] &quot;Cervántico&quot;                     &quot;Cervantes&quot;                     
## 
## $Planck
## [1] &quot;Max Planck&quot;                   &quot;Planck&quot;                      
## [3] &quot;Max Karl Ernst Ludwig Planck&quot;
## 
## $Noexiste
## [1] NA</code></pre>
<p>Gets the URL of de Primary image as a URL of Wikimedia pages.</p>
<p>Gets all URL of files inserted in the pages (images, sounds,
videos…), using ‘|’ as separator, and excluding some extensions in the
exclude_ext parameter.</p>
<p>Both functions automatically resolve redirects (the destiny is the
“normalized” column of the data-frame returned).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">m_reqMediaWiki</span>(<span class="fu">c</span>(<span class="st">&#39;Max Planck&#39;</span>, <span class="fu">URLdecode</span>(<span class="st">&quot;a%CC%8C&quot;</span>), <span class="st">&#39;Max&#39;</span>, <span class="st">&#39;Cervante&#39;</span>, <span class="st">&#39;humanist&#39;</span>),</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>                  <span class="at">mode=</span><span class="st">&#39;pagePrimaryImage&#39;</span>)</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">m_reqMediaWiki</span>(<span class="fu">c</span>(<span class="st">&#39;Max Planck&#39;</span>, <span class="fu">URLdecode</span>(<span class="st">&quot;a%CC%8C&quot;</span>), <span class="st">&#39;Max&#39;</span>, <span class="st">&#39;Cervante&#39;</span>, <span class="st">&#39;humanist&#39;</span>),</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>                  <span class="at">mode=</span><span class="st">&#39;pageFiles&#39;</span>, <span class="at">exclude_ext =</span> <span class="st">&quot;svg|webp|xcf&quot;</span>)</span></code></pre></div>
</div>
<div id="m_pageviews" class="section level4">
<h4>m_Pageviews</h4>
<p>Gets visits that a page have had in a date interval</p>
<p>Optional: redirects</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>v <span class="ot">&lt;-</span>  <span class="fu">m_Pageviews</span>(<span class="at">article=</span><span class="st">&quot;Cervantes&quot;</span>, <span class="at">start=</span><span class="st">&quot;20230101&quot;</span>, <span class="at">end=</span><span class="st">&quot;20230501&quot;</span>,</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>                   <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>, <span class="at">granularity=</span><span class="st">&quot;monthly&quot;</span>)</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>vv <span class="ot">&lt;-</span> <span class="fu">m_Pageviews</span>(<span class="at">article=</span><span class="st">&quot;Cervantes&quot;</span>, <span class="at">start=</span><span class="st">&quot;20230101&quot;</span>, <span class="at">end=</span><span class="st">&quot;20230501&quot;</span>,</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>                   <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>, <span class="at">granularity=</span><span class="st">&quot;monthly&quot;</span>,</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>                   <span class="at">redirects=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="m_xtoolsinfo" class="section level4">
<h4>m_XtoolsInfo</h4>
<p>Obtains information (as vector) about an article in the Wikimedia
project.</p>
<p>Infotype: articleinfo, prose, links</p>
<p>Optional: redirects</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>x <span class="ot">&lt;-</span>  <span class="fu">m_XtoolsInfo</span>(<span class="at">article=</span><span class="st">&quot;Cervantes&quot;</span>, <span class="at">infotype=</span><span class="st">&quot;articleinfo&quot;</span>, <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>)</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>xx <span class="ot">&lt;-</span> <span class="fu">m_XtoolsInfo</span>(<span class="at">article=</span><span class="st">&quot;Cervantes&quot;</span>, <span class="at">infotype=</span><span class="st">&quot;articleinfo&quot;</span>, <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>,</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>                   <span class="at">redirects=</span><span class="cn">TRUE</span>)</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>y <span class="ot">&lt;-</span>  <span class="fu">m_XtoolsInfo</span>(<span class="at">article=</span><span class="st">&quot;Miguel de Cervantes&quot;</span>, <span class="at">infotype=</span><span class="st">&quot;links&quot;</span>, <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>)</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>yy <span class="ot">&lt;-</span> <span class="fu">m_XtoolsInfo</span>(<span class="at">article=</span><span class="st">&quot;Cervantes&quot;</span>, <span class="at">infotype=</span><span class="st">&quot;links&quot;</span>, <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>,</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a>                    <span class="at">redirects=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>Gets all information (articleinfo, prose, links).</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>z  <span class="ot">&lt;-</span> <span class="fu">m_XtoolsInfo</span>(<span class="at">article=</span><span class="st">&quot;Miguel de Cervantes&quot;</span>, <span class="at">infotype=</span><span class="st">&quot;all&quot;</span>, <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>)</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>zz <span class="ot">&lt;-</span> <span class="fu">m_XtoolsInfo</span>(<span class="at">article=</span><span class="st">&quot;Cervantes&quot;</span>, <span class="at">infotype=</span><span class="st">&quot;all&quot;</span>, <span class="at">project=</span><span class="st">&quot;es.wikipedia.org&quot;</span>,</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>                       <span class="at">redirects=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="examples-using-viaf-functions" class="section level2">
<h2>Examples using VIAF functions</h2>
<div id="v_autosuggest" class="section level4">
<h4>v_AutoSuggest</h4>
<p>Searches authors. Sometimes the same author appears several times,
under a different name).</p>
<p>Return a data-frame.</p>
<p>Important: The API returns a maximum of 10 records.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">v_AutoSuggest</span>(<span class="st">&#39;Iranzo&#39;</span>)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">v_AutoSuggest</span>(<span class="st">&#39;Esparza, María&#39;</span>)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">v_AutoSuggest</span>(<span class="st">&#39;Escobar, Modesto&#39;</span>)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="co"># Note that four rows are returned, but only two different viafids.</span></span></code></pre></div>
</div>
<div id="v_search" class="section level4">
<h4>v_Search</h4>
<p>Search using CQL_Query</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="co"># Auxiliary function that extracts specific information from each record.</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>showVIAF <span class="ot">&lt;-</span> <span class="cf">function</span>(r) {</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> r) {</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>    i <span class="ot">&lt;-</span> i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>    <span class="co"># Get viaf record</span></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>    viaf <span class="ot">&lt;-</span> j<span class="sc">$</span>record<span class="sc">$</span>recordData</span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a>    viafid <span class="ot">&lt;-</span> viaf<span class="sc">$</span>viafID</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">Record #&quot;</span>,i,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Sources:</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">v_Extract</span>(viaf, <span class="at">info=</span><span class="st">&#39;sources&#39;</span>))</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Gender: &quot;</span>);       <span class="fu">print</span>(<span class="fu">v_Extract</span>(viaf, <span class="at">info=</span><span class="st">&#39;gender&#39;</span>))</span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Dates: &quot;</span>) ;       <span class="fu">print</span>(<span class="fu">v_Extract</span>(viaf, <span class="at">info=</span><span class="st">&#39;dates&#39;</span>))</span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&#39;Occupations: &#39;</span>);  <span class="fu">print</span>(<span class="fu">v_Extract</span>(viaf, <span class="at">info=</span><span class="st">&#39;occupations&#39;</span>))</span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Titles: &quot;</span>);       <span class="fu">print</span>(<span class="fu">v_Extract</span>(viaf, <span class="at">info=</span><span class="st">&#39;titles&#39;</span>))</span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Wikipedias: &quot;</span>);   <span class="fu">print</span>(<span class="fu">v_Extract</span>(viaf, <span class="at">info=</span><span class="st">&#39;wikipedias&#39;</span>))</span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a>  }</span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a>}</span></code></pre></div>
<p>Search in any field (cql.any)</p>
<p>Operator is “=”: so search all terms and only those ones:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>CQL_Query <span class="ot">&lt;-</span> <span class="st">&#39;cql.any = &quot;García Iranzo, Juan&quot;&#39;</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(CQL_Query)</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co"># r contains complete VIAF records (sometimes seen as a &quot;cluster record&quot;,</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="co"># which is unified by combining records from many libraries around the world)</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="fu">showVIAF</span>(r)</span></code></pre></div>
<p>Shortcut</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(<span class="st">&quot;García Iranzo, Juan&quot;</span>, <span class="at">mode=</span><span class="st">&quot;anyField&quot;</span>)</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="fu">showVIAF</span>(r)</span></code></pre></div>
<p>Search in 1xx, 4xx, 5xx fields of MARC record (local.names)</p>
<p>Operator is “all”: search all terms</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>CQL_Query <span class="ot">&lt;-</span> <span class="st">&#39;local.names all &quot;Figuerola&quot;&#39;</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(CQL_Query)</span></code></pre></div>
<p>Shortcut</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(<span class="st">&quot;Figuerola&quot;</span>, <span class="at">mode=</span><span class="st">&quot;allNames&quot;</span>)</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">length</span>(r), <span class="fu">length</span>(r2))</span></code></pre></div>
<pre><code>## 0 0</code></pre>
<p>Records found exceeds the maximum per request API limit : 250</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>CQL_Query <span class="ot">&lt;-</span> <span class="st">&#39;local.names all &quot;Bolero&quot;&#39;</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(CQL_Query)</span></code></pre></div>
<p>Search in 100, 400, 500 fields of MARC record
(local.personalNames)</p>
<p>Operator is “all”: search all terms</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>CQL_Query <span class="ot">&lt;-</span> <span class="st">&#39;local.personalNames all &quot;Modesto Escobar&quot;&#39;</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(CQL_Query)</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="fu">showVIAF</span>(r)</span></code></pre></div>
<p>v_Search mode=allmainHeadingEl: 1xx fields of MARC record:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(<span class="st">&quot;Escobar Mercado, Modesto&quot;</span>, <span class="at">mode=</span><span class="st">&#39;allmainHeadingEl&#39;</span>)</span></code></pre></div>
<p>Search in Titles</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a>CQL_Query <span class="ot">&lt;-</span> <span class="st">&#39;local.title all &quot;Los pronósticos electorales con encuestas&quot;&#39;</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">v_Search</span>(CQL_Query)</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="fu">showVIAF</span>(r)</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
